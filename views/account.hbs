{{>navbar}}

    <div class="grid-2x0-gap1">
        <span>Name</span>
        <span>{{session.user.forename}} {{session.user.surname}}</span>

        <span>Credited hours</span>
        <span>{{student_info.hrs_credit}}</span>

        <span>Request a session</span>
        <form method="POST" action="/users/request_slot" class="flex gap-half" id="book_slot_form">
            <div>
                <label>Slot</label>
                <input type="datetime-local" name="slot" step="1800" min="{{datetime_min}}" max="{{datetime_max}}"
                    value="{{datetime_min}}" pattern="^[0-9]{4}-[0-9]{2}-[0-9]{2}T1[8-9]:[0-9]{2}$" />
            </div>
            <div>
                <label>Duration</label>
                <select name="duration_mins">
                    <option value="60" selected> 60 mins</option>
                    <option value="90" >90 mins</option>
                    <option value="120">120 mins</option>
                </select>
            </div>

            <button class="btn-luminous-blue">Request</button>
            <span id="availability" class="txt-red B-xlg"></span>
        </form>

        <table>
            <thead>
            <tr>

                <th>month</th>
                <th>day</th>
                <th>Start Time</th>
                <th>Duration (hrs)</th>
            </tr>
            </thead>


            <tbody>
            {{#each appointments}}

                <tr class="txt-align-ctr">
                    <td>{{month}}</td>
                    <td>{{day}}</td>
                    <td>{{int_div start_time 2}}:{{ternary (not_equal (modulo start_time 2) 0) "30" "00"}}</td>
                    <td>{{div count_halves 2}} </td>
                    <td>
                        <form action="/users/cancel_session" method="POST">
                            <input type="hidden" name="year" value="{{year}}"/>
                            <input type="hidden" name="month" value="{{month}}"/>
                            <input type="hidden" name="day" value="{{day}}"/>
                            <input type="hidden" name="start_time" value="{{start_time}}"/>
                            <input type="hidden" name="count" value="{{count_halves}}" />
                            <button class="btn-luminous-red">Cancel</button>
                        </form>
                    </td>
                </tr>

            {{/each}}
            </tbody>


        </table>

    </div>

<script src="/public/javascripts/account.js"></script>